<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>mock test </title>
</head>
<body>
<div align="center">
		<h1 th:text="${exam.getExam_name()} "> exam name</h1>
		Time:- <span th:text="${exam.getTime_hr()} "></span>hr <span
			th:text="${exam.getTime_min()} "></span>min<br> 
			Level:- <span th:text="${exam.getLevel()} ">level</span><br>&nbsp;&nbsp; 
	</div>
	
	
<form th:action="@{/user_view}">
		<!-- <div th:if="${questions.empty}">
            No Questions Available
        </div>
        
		<div th:each="qstn ,stat : ${questions}" >
			 <span th:text="${stat.index+1}+') '" > Sl.No. </span> -->
			 <div>
				<span th:text="${question.getQstn()}" th:value="${question.id}"> question </span><br>
			 <span th:each="option : ${question.options}">
            	
			<input type="radio"  th:name="${question.id}"  th:value="${option.opt}" th:text="${option.opt}"/>
		</span>
			<br><br><br>
		
		 </div>
		 
	 <input type="submit" value="submit" th:onClick="|getScore(this.form,${exam.count},3);|"><br><br>
	Number of score out of <span th:text="${exam.count}"></span> = <input type=text name="mark"><br><br>
	Score in percentage = <input type=text name="percentage">
	Score  = <input type=text name="ans">
</form>

<form  th:action="@{/user_nextPage}" >
<div th:object="${exam}">
<span th:if="${iterator.hasNext()}" >
<button ><a th:href="@{/user_nextPage(index=${iterator.nextIndex()})}">next</button></span>
<p th:text="${iterator.next()}"><p th:text="${iterator.nextIndex()}"></div> 
			
</form>
	
		<!-- <button><a th:href="@{/user_nextPage(lit=${iterator.next()})}">next</a></button> -->
<div th:each="ans ,stat : ${answers}" >
 		<span th:text="${stat.index+1}+') '" > Sl.No. </span>
		<span th:text="${ans}" > question </span><br>
</div>
</body>
<script>
	function getScore(form,numQues,numChoi) 
	{
		/* var answers = new Array(numQues);
		answers = "[[${answers}]]"; */
		//var ans=answers[0];
		/* answers=answers.toString();
		form.ans.value = answers[0];
		alert(answers); */
		/* answers[0] = "n";
		answers[1] = "sem";
		answers[2] = "morbi";
		answers[3] = "llnjk"; */
		var x = document.getElementById(this).elements.namedItem(a);
		
		var score = 0,currElt,currSelection;
		for (i = 0; i < numQues; i++) 
		{
			currElt = i * numChoi;
			answered = false;
			for (j = 0; j < numChoi; j++) 
			{
				currSelection = form.elements[currElt + j];
				if (currSelection.checked) 
				{
					answered = true;
					if (currSelection.value == answers[i]) 
					{
						score++;
						break;
					}
				}
			}
		}
		form.percentage.value = Math.round(score / numQues * 100) + "%";
		form.mark.value = score;
	}
</script>
	


</html>